# Project: yb-sample-apps

## Clarification

Throughout this document:

* "You" refers to you, the user, who is reading this guide and running the
  yb-sample-apps.
* "I" refers to me, Gemini, the AI assistant providing this information.

## Build and Execution

This document provides a quick guide for yb-sample-apps. I'll refer to the
main README.md file for comprehensive build and execution instructions.

To build the generator, I will use the following command:
`mvn -DskipTests -DskipDockerBuild package`

### Essential information before you can run the workload generator

To run any sample application, you **must** provide the following information:

1.  **Sample Application Name:** Which specific application from
    `yb-sample-apps` do you intend to run? (e.g., `SqlUpdates`)
2.  **Cluster IP Addresses:** The IP addresses of your YugabyteDB cluster.

If you don't provide this information upfront, I'll ask you for it.

### Advanced Configuration

When assisting you with advanced flags, I'll adhere to the following
instructions

* I will not make assumptions about the required parameters.
* I will run --help on the required app to identify the intended flag.
* Any explicit instructions or flag values provided by you always take
  precedence over default values or inferences made by me.

## Style Guide

* All Java code should be formatted to a maximum of 99 characters per line.

## Agent Behavior

- **No Proactive Debugging:** Do not engage in proactive debugging or go beyond explicit instructions. Leave problem-solving and debugging to the user.

## Create a new app / workload generator

You can ask me to create a sample app / workload generator. To create the app
well, I will confirm the following information with you.

* **Read Operation Summary:** A description of what the read operations should
  do (e.g., "read a random row by ID", "scan a range of rows").
* **Write operation summary:** A description of what the write operations
  should do (e.g., "insert new rows", "update existing rows", "delete specific
  data").
* **Tables and Schema:** Details about the tables required, including their
  names, column names, and data types. Often, a single table is sufficient.
* **App Specific Command Line Flags:** Any unique command-line options your new
  app should support (e.g., --batch-size, --num-partitions).
* **Name of the App:** The desired name for your new application (e.g.,
  MyCustomWorkload, UserActivityTracker).
* **Other Configuration Variables:** Any other important variables or settings
  specific to your app (e.g. "default number of read threads or write
  threads").

You can initiate the process by saying something like:

* "Create a new workload generator."
* "Help me build a new app."
* "I want to define a custom workload."

To help me understand structure, you can also suggest an existing app from the
apps/ folder to use as an inspiration.

For example:
* "Create a new app similar to SqlStaleReadDetector."
* "Take inspiration from SqlUpdates for my new workload."

I will inherit from AppBase.java and add it to my context.

### Core Abstraction Methods

1. doRead():
  * This method runs in a dedicated read thread.
  * It executes a single read operation.
  * It returns 1 if the read operation is successful and 0 otherwise. This
    return value is crucial for computing throughput (operations per second)
  * Important: Wherever possible, doRead() will use prepared statements to
    execute read operations for optimal performance.
2. doWrite is the write analog of doRead.
  * This method is the write analogue of doRead().
  * It executes a single write operation.
3. createTablesIfNeeded():
  * This method is responsible for creating any necessary tables for your
    application.
  * It also loads initial data before the workload begins.

### Auto generation

When creating a new app, I will add a comment block below the copyright header.
This comment will use the existing file's comment style and be wrapped to a
maximum of 99 characters per line. It will include:

* A statement that the file was partially autogenerated.
* The refined initial prompt used to create the app. The prompt will be refined
  to remove sensitive information (like customer data) and correct
  spelling/grammar. The prompt does not have to be an exact copy of the
  original.
* Any significant revisions or follow-up instructions that led to changes in
  the Java file.
